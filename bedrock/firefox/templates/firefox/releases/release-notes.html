{# This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/. #}

{% extends "firefox/base-resp.html" %}
{% block page_title_prefix %}{% endblock %}
{% block page_title %}{{ _('{product} — {channel} Notes ({version})')|f(product=release.product, channel=channel_name, version=release.version) }}{% endblock %}

{% block body_id %}notes{% endblock %}
{% block body_class %}fx-notes blank{% endblock %}

{% block site_css %}
  {% stylesheet 'firefox_releasenotes' %}
{% endblock %}

{% block optimizely %}
  {% if waffle.switch('firefox-releasenotes-optimizely') %}
     {% include 'includes/optimizely.html' %}
  {% endif %}
{% endblock %}

{# channel_name is for display purposes where needed.  #}
{% set channel_name = channel_name|default('') %}

{% block content %}
<main role="main">
  <article id="main-content">
      {% block platform_switch %}
    {% if equivalent_release_url %}
      <aside id="platform">
        <h4>{{ _('View notes for:') }}</h4>
        <ul>
        {% if release.product == 'Firefox' %}
          <li><span>{{ _('Desktop') }}</span></li>
          <li><a href="{{ equivalent_release_url }}">{{ _('Android') }}</a></li>
        {% else %}
          <li><a href="{{ equivalent_release_url }}">{{ _('Desktop') }}</a></li>
          <li><span>{{ _('Android') }}</span></li>
        {% endif %}
        </ul>
      </aside>
    {% endif %}
    {% endblock %}

  {% block notes_header %}
    <header class="notes-head">
    <p>
     <h1>{{ version }}</h1>
     <h2>{{ _('{date}')|f(date=release.release_date|l10n_format_date, version=release.version) }}</h2>
     </p>
    {% block notes_heading_secondary %}
    {% endblock %}

      <p>
        {{ _('Check out "What’s New" and "Known Issues" for this version of Firefox below.') }}
      {% trans feedback='https://input.mozilla.org/feedback/android/' + release.version + '?utm_source=releasenotes'
          if release.product == 'Firefox for Android'
          else 'https://input.mozilla.org/feedback/firefox/' + release.version + '?utm_source=releasenotes',
          bugzilla='https://bugzilla.mozilla.org/' %}
        As always, you’re encouraged to
        <a href="{{ feedback }}">tell us what you think</a>,
        or <a href="{{ bugzilla }}">file a bug in Bugzilla</a>.
      {% endtrans %}
      {% if release.bug_list %}
      <form action="https://bugzilla.mozilla.org/buglist.cgi" method="post">
        <input type="hidden" name="limit" value="0">
        <input type="hidden" name="bug_id" value="{{ release.bug_list }}">
        <p>If interested, please see the <button type="submit">complete list of changes</button> in this release.</p>
      </form>
      {% else %}
          If interested, please see the  <a href="{{ release.get_bug_search_url() }}">complete list of changes</a> in this release.
      {% endif %}
        {{ release.text|markdown|safe }}
      </p>
    </header>
  {% endblock %}

    <div class="label-column">
      {% if new_features %}
      <section class="notes-section" id="new-features">

      <div id = "new-label" >
            <br>
            <p class="note_label"> <i class="fa fa-diamond"></i>  NEW </p>
            <hr>
        </div>

          <div id = "fixed-label">
          {% for note in new_features if note.tag =="Fixed" %}
          {% if loop.first %}
            <p class="note_label"><i class="fa fa-check-circle"></i>  FIXED </p>
          {% endif %}
          <li style = "visibility:hidden" {% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
          {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </div>

        <div id = "changed-label">
        {% for note in new_features if note.tag =="Changed" %}
          {% if loop.first %}
            <p class="note_label"><i class="fa fa-refresh"></i>  CHANGED </p>
          {% endif %}
          <li style = "visibility:hidden" {% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
          {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </div>

          <div id = "developer-label">
          {% for note in new_features if note.tag =="Developer" %}
          {% if loop.first %}
            <p class="note_label"><i class="fa fa-cog"></i>  DEVELOPER </p>
          {% endif %}
          <li style = "visibility:hidden" {% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
          {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </div>


        <div id = "html-label">
          {% for note in new_features if note.tag =="HTML5" %}
          {% if loop.first %}
            <p class="note_label"><i class="fa fa-wrench"></i>
  HTML 5 </p>
          {% endif %}
          <li style = "visibility:hidden" {% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
        {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </div>

          <div id = "resolved-label">
          {% for note in new_features if note.tag =="Resolved" %}
          {% if loop.first %} 
            <p class="note_label"> RESOLVED </p>
          {% endif %}
          <li style = "visibility:hidden" {% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
          {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </div>

      </section>
      {% endif %}

      {% if known_issues %}
      <section class="notes-section" id="known-issues">
      <div id  = "unresolved-label">
        <ul class="section-items tagged">
          {% for note in known_issues %}
          {% if loop.first %}
            <p class="note_label"> <i class="fa fa-ban"></i>  UNRESOLVED </p>
          {% endif %}
          <li style="visibility:hidden" id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
          {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </ul>
        </div>
      </section>
      {% endif %}
    </div>

        <div class="notes-column">
      {% if new_features %}
      <section class="notes-section" id="new-features">



        <div id = "new-wrapper">
        <ul class="section-items tagged">
        {% for note in new_features if note.tag =="New" %}
          {% if loop.first %}
             <br>
            <p style="visibility:hidden"> NEW </p>
          {% endif %}
          <li {% if not note.tag %}class="untagged"{% endif %} {% if loop.index % 2 != 0 %}class = "gray_note" {% endif %} {% if loop.index % 2 == 0 %}class = "blue_note" {% endif %} id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
          {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </ul>
        </div>


        <div id = "fixed-wrapper">
        <ul class="section-items tagged">
          {% for note in new_features if note.tag =="Fixed" %}
          {% if loop.first %}
            <p style="visibility:hidden"> FIXED </p>
          {% endif %}
          <li {% if not note.tag %}class="untagged"{% endif %} {% if loop.index % 2 != 0 %}class = "gray_note" {% endif %} {% if loop.index % 2 == 0 %}class = "blue_note" {% endif %}id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
          {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </ul>
        </div>


         <div id = "changed-wrapper">
         <ul class="section-items tagged">
          {% for note in new_features if note.tag =="Changed" %}
          {% if loop.first %}
            <p style="visibility:hidden"> CHANGED </p>
          {% endif %}
          <li {% if not note.tag %}class="untagged"{% endif %}{% if loop.index % 2 != 0 %}class = "gray_note" {% endif %} {% if loop.index % 2 == 0 %}class = "blue_note" {% endif %}id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
          {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </ul>
        </div>


        <div id = "developer-wrapper">
        <ul class="section-items tagged">
        {% for note in new_features if note.tag =="Developer" %}
          {% if loop.first %}
            <p style="visibility:hidden"> DEVELOPER </p>
          {% endif %}
          <li {% if not note.tag %}class="untagged"{% endif %}{% if loop.index % 2 != 0 %}class = "gray_note" {% endif %} {% if loop.index % 2 == 0 %}class = "blue_note" {% endif %} id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
          {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </ul>
        </div>



        <div id = "html-wrapper">
        <ul class="section-items tagged">
        {% for note in new_features if note.tag =="HTML5" %}
          {% if loop.first %}
            <p style="visibility:hidden"> HTML 5 </p>
          {% endif %}
          <li {% if not note.tag %}class="untagged"{% endif %}{% if loop.index % 2 != 0 %}class = "gray_note" {% endif %} {% if loop.index % 2 == 0 %}class = "blue_note" {% endif %}id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
          {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </ul>
        </div>


        <div id = "resolved-wrapper">
        <ul class="section-items tagged">
          {% for note in new_features if note.tag =="Resolved" %}
          {% if loop.first %}
            <p style="visibility:hidden"> RESOLVED </p>
          {% endif %}
          <li {% if not note.tag %}class="untagged"{% endif %}{% if loop.index % 2 != 0 %}class = "gray_note" {% endif %} {% if loop.index % 2 == 0 %}class = "blue_note" {% endif %} id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
           {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </ul>
        </div>
      </section>


      <div id = "unresolved-wrapper">
      <ul class="section-items tagged">
      {% endif %}
      {% if known_issues %}
      <section class="notes-section" id="known-issues">
        <ul class="section-items tagged">
          {% for note in known_issues %}
          {% if loop.first %}
            <p style="visibility:hidden"> <i class="fa fa-ban"></i>  UNRESOLVED </p>
          {% endif %}
          <li {% if loop.index % 2 != 0 %}class = "gray_note" {% endif %} {% if loop.index % 2 == 0 %}class = "blue_note" {% endif %}id="note-{{ note.id }}"> <div class="note_wrap">
              {{ note.note|markdown|safe }} </div>
          </li>
                    {% if loop.last %}
            <hr>
          {% endif %}
        {% endfor %}
        </ul>
        </section>
      </section>
      {% endif %}
    </div>

            <div class="tri-column" id="note-media">
      {% if new_features %}
      <section class="notes-section" id="new-features">
        <ul class="section-items tagged">
        <ul class="section-items tagged">

        {% for note in new_features if note.tag =="New" %}
          {% if loop.first %}
            <p style="visibility:hidden"> NEW </p>
          {% endif %}
          <li style="visibility:hidden"{% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}"><div class="note_wrap">
              {{ note.note|markdown|safe }}</div>
          </li>
        {% endfor %}

          {% for note in new_features if note.tag =="Fixed" %}
          {% if loop.first %}
            <p style="visibility:hidden"> FIXED </p>
          {% endif %}
          <li style="visibility:hidden"{% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}">
              {{ note.note|markdown|safe }}
          </li>
        {% endfor %}

          {% for note in new_features if note.tag =="Changed" %}
          {% if loop.first %}
            <p style="visibility:hidden"> CHANGED </p>
          {% endif %}
          <li style="visibility:hidden"{% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}">
              {{ note.note|markdown|safe }}
          </li>
        {% endfor %}

        {% for note in new_features if note.tag =="Developer" %}
          {% if loop.first %}
            <p style="visibility:hidden"> DEVELOPER </p>
          {% endif %}
          <li style="visibility:hidden"{% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}">
              {{ note.note|markdown|safe }}
          </li>
        {% endfor %}

        {% for note in new_features if note.tag =="HTML5" %}
          {% if loop.first %}
            <p style="visibility:hidden"> HTML 5 </p>
          {% endif %}
          <li style="visibility:hidden"{% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}">
              {{ note.note|markdown|safe }}
          </li>
        {% endfor %}

          {% for note in new_features if note.tag =="Resolved" %}
          {% if loop.first %}
            <p style="visibility:hidden"> RESOLVED </p>
          {% endif %}
          <li style="visibility:hidden"{% if not note.tag %}class="untagged"{% endif %} id="note-{{ note.id }}">
              {{ note.note|markdown|safe }}
          </li>
        {% endfor %}
        </ul>
      </section>
      {% endif %}
      {% if known_issues %}
      <section class="notes-section" id="known-issues">
        <ul class="section-items tagged">
          {% for note in known_issues %}
          {% if loop.first %}
            <p style="visibility:hidden"> UNRESOLVED </p>
          {% endif %}
          <li style="visibility:hidden"id="note-{{ note.id }}">
              {{ note.note|markdown|safe }}
          </li>
        {% endfor %}
        </ul>
      </section>
      {% endif %}
    </div>

  </article>
</main>
{% endblock %}

{% block js %}
  <script type=text/javascript src="http://code.jquery.com/jquery-1.10.1.min.js"> 
JQuery(document).ready(function() {
  Tabzilla.disableEasterEgg();
  console.log("SUp");
  var newHeight = JQuery("#new-wrapper").height();
  JQuery("#new-label").height(newHeight);
  console.log("Hi");

  var fixedHeight = JQuery("#fixed-wrapper").height();
  JQuery("#fixed-label").height(fixedHeight);

  var changedHeight = JQuery("#changed-wrapper").height();
  JQuery("#changed-label").height(changedHeight);

  var developerHeight = JQuery("#developer-wrapper").height();
  JQuery("#developer-label").height(developerHeight);

  var htmlHeight = JQuery("#html-wrapper").height();
  JQuery("#html-label").height(htmlHeight);

  var resolvedHeight = JQuery("#resolved-wrapper").height();
  JQuery("#resolved-label").height(resolvedHeight);

  var unresolvedHeight = JQuery("#unresolved-wrapper").height();
  JQuery("#unresolved-label").height(unresolvedHeight);

});
</script> 
{% endblock  %}
